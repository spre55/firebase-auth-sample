<!DOCTYPE html>
<html>

<head>
</head>

<body>
    <h1>Welcome to My Page!</h1>
    <div id="message"></div>
    <div id="email"></div>
    <div id="emailVerified"></div>
    <button onClick="signOut();">ログアウトするぞ</button>
</body>

<script src="https://www.gstatic.com/firebasejs/5.9.0/firebase.js"></script>
<script>
    // Initialize Firebase
    var config = {
        apiKey: "{{.apiKey}}",
        authDomain: "{{.authDomain}}",
        databaseURL: "{{.databaseURL}}",
        projectId: "{{.projectId}}",
        storageBucket: "{{.storageBucket}}",
        messagingSenderId: "{{.messagingSenderId}}",
    };
    firebase.initializeApp(config);
    // ユーザのサインイン状態の判定
    firebase.auth().onAuthStateChanged(function (user) {
        if (user) {
            // User is signed in.
            document.getElementById('message').innerHTML = "ようこそ " + user.displayName;
            document.getElementById('email').innerHTML = "Email: " + user.email;
            document.getElementById('emailVerified').innerHTML = "EmailVerify: " + user.emailVerified;

            console.log('sign in');
        } else {
            // No user is signed in.
            console.log('sign out');
            location.href = "/";
        }
    });

    function signOut() {
        firebase.auth().signOut().then(function () {
            console.log('success sign out.');
        }).catch(function (error) {
            console.log('error: ', error);
        });
    }
</script>

</html>